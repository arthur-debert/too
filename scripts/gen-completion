#!/usr/bin/env bash
set -euo pipefail

# Build the completion generator
echo "Building too-completion..."
go build -o too-completion ./cmd/tools/too-completion

# Create completions directory
mkdir -p completions

# Generate completions
echo "Generating bash completion..."
./too-completion bash > completions/too.bash

echo "Generating zsh completion..."
./too-completion zsh > completions/_too

echo "Generating fish completion..."
./too-completion fish > completions/too.fish

# Clean up
rm too-completion

echo "âœ… Completions generated in completions/"